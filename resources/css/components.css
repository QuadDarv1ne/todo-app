/* Анимации — могут находиться вне @layer */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

@layer components {
    /* Общие стили для компонентов */

    /* Task Card */
    .task-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translateZ(0);
    }

    .task-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .task-title {
        transition: color 0.2s ease;
    }

    .task-card:hover .task-title:not(.line-through) {
        color: #4f46e5;
    }

    /* Stats Card */
    .stats-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translateZ(0);
    }

    .stats-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    /* Progress Bar */
    .progress-bar .rounded-full {
        transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Task Form */
    .task-form input:focus,
    .task-form textarea:focus {
        outline: none;
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        border-color: #6366f1;
    }

    /* Task Filters */
    .task-filters input:focus {
        outline: none;
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        border-color: #6366f1;
    }

    /* Buttons */
    .btn-primary {
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translateZ(0);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    .btn-primary:active {
        transform: translateY(0);
    }

    .fade-in-up {
        animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    /* Responsive improvements */
    @media (max-width: 768px) {
        .task-card .flex.items-start {
            flex-direction: column;
            gap: 1rem;
        }
        
        .task-card .flex.items-center.justify-between {
            width: 100%;
        }
        
        .stats-card {
            text-align: center;
        }
        
        .stats-card .flex.items-center.justify-between {
            flex-direction: column;
            gap: 1rem;
        }
    }

    /* Dark mode via .dark class (класс на <html>) */
    .dark .task-card {
        background: #111827; /* ближе к bg-gray-900 */
        border-color: #374151;
    }

    .dark .task-card:hover {
        background: #1f2937; /* bg-gray-800 */
    }

    .dark .stats-card {
        background: #111827;
        border-color: #374151;
    }

    .dark .stats-card:hover {
        background: #1f2937;
    }

    .dark .task-form,
    .dark .task-filters {
        background: #111827;
        border-color: #374151;
    }

    .dark .task-form input,
    .dark .task-form textarea,
    .dark .task-filters input {
        background: #0b1220; /* very dark bg (≈ slate-950) */
        border-color: #374151;
        color: #f3f4f6;
    }
}